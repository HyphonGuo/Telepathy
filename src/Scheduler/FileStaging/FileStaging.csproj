<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(EnvironmentConfig)" />
  <PropertyGroup>
    <AssemblyName>Microsoft.Hpc.Azure.FileStaging</AssemblyName>
    <OutputType>Library</OutputType>
    <AssemblyClsCompliant>false</AssemblyClsCompliant>
    <RootNamespace>Microsoft.Hpc.Azure.FileStaging</RootNamespace>
    <ProjectGuid>{EB57E064-0EC9-47AB-8094-6D7923F0CAED}</ProjectGuid>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <TargetFrameworkVersion>v4.6</TargetFrameworkVersion>
    <Localizable>true</Localizable>
  </PropertyGroup>
  <ItemGroup>
    <!--
    Several types from the below two assemblies are directly include into this project for some reason.
    Someone should have a look to see if this actually makes sense or if this project should just reference the below two projects.

    <Reference Include="Microsoft.Hpc.Azure.FileStaging.Client">
      <HintPath>$(ObjectRoot)\private\Scheduler\FileStagingClient\$(ObjectDirectory)\$(BuildArchitecture)\Microsoft.Hpc.Azure.FileStaging.Client.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.Ccp.Sdm.Core">
      <HintPath>$(ObjectRoot)\private\Management\Sdm\sdmcore\$(ObjectDirectory)\$(BuildArchitecture)\Microsoft.Ccp.Sdm.Core.dll</HintPath>
    </Reference>
-->
    <Reference Include="Microsoft.WindowsAzure.Storage">
      <HintPath>$(PkgWindowsAzure_Storage)\lib\net45\Microsoft.WindowsAzure.Storage.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.WindowsAzure.ServiceRuntime">
      <HintPath>$(AzureRefPath)\Microsoft.WindowsAzure.ServiceRuntime.dll</HintPath>
    </Reference>
    <Reference Include="System" />
    <Reference Include="System.configuration" />
    <Reference Include="System.Core" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="System.Data" />
    <Reference Include="System.DirectoryServices.AccountManagement" />
    <Reference Include="System.EnterpriseServices" />
    <Reference Include="System.DirectoryServices" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Security" />
    <Reference Include="System.ServiceModel" />
    <Reference Include="System.ServiceProcess" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
  </ItemGroup>
  <ItemGroup>
    <MessageCompile Include="FileStagingEvents.man">
      <Namespace>Microsoft.Hpc.Azure.FileStaging.Events</Namespace>
      <MacroPrefix>EventWrite</MacroPrefix>
    </MessageCompile>
    <GenerateTemplateFormatter Include="FileStagingEvents.man">
      <GenTraceWrapper>Microsoft.Hpc.Azure.FileStaging.Events</GenTraceWrapper>
      <TraceSource>HpcFileStaging</TraceSource>
      <MacroPrefix>EventWrite</MacroPrefix>
    </GenerateTemplateFormatter>
  </ItemGroup>
  <ItemGroup>
    <Compile Include="..\..\Management\FileTransfer\FileTransferFaultDetail.cs">
      <Link>Common\FileTransferFaultDetail.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AuthenticationUtil.cs">
      <Link>Common\AuthenticationUtil.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AzureHelper.cs">
      <Link>Common\AzureHelper.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AzureNaming.cs">
      <Link>Common\AzureNaming.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AzureNodeMapping.cs">
      <Link>Common\AzureNodeMapping.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AzureNodeMappingUtil.cs">
      <Link>Common\AzureNodeMappingUtil.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AzureProxyFileReader.cs">
      <Link>Common\AzureProxyFileReader.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AzureProxyFileWriter.cs">
      <Link>Common\AzureProxyFileWriter.cs</Link>
    </Compile>
    <Compile Include="..\..\common\AzureTracing.cs">
      <Link>Common\AzureTracing.cs</Link>
    </Compile>
    <Compile Include="..\..\common\CredentialNativeMethods.cs">
      <Link>Common\CredentialNativeMethods.cs</Link>
    </Compile>
    <Compile Include="..\..\common\Credentials.cs">
      <Link>Common\Credentials.cs</Link>
    </Compile>
    <Compile Include="..\..\common\FilePermission.cs">
      <Link>Common\FilePermission.cs</Link>
    </Compile>
    <Compile Include="..\..\common\HPCIdentity.cs">
      <Link>Common\HPCIdentity.cs</Link>
    </Compile>
    <Compile Include="..\..\Management\FileTransfer\FileTransferChannel.cs">
      <Link>FileTransferChannel.cs</Link>
    </Compile>
    <Compile Include="..\..\Management\FileTransfer\IFileTransfer.cs">
      <Link>IFileTransfer.cs</Link>
    </Compile>
    <Compile Include="..\FileStagingClient\ClusterFileSystemInfo.cs">
      <Link>FileStagingClient\ClusterFileSystemInfo.cs</Link>
    </Compile>
    <Compile Include="..\FileStagingClient\ClusterFileInfo.cs">
      <Link>FileStagingClient\ClusterFileInfo.cs</Link>
    </Compile>
    <Compile Include="..\FileStagingClient\ClusterDirectoryInfo.cs">
      <Link>FileStagingClient\ClusterDirectoryInfo.cs</Link>
    </Compile>
    <Compile Include="AzureFileStagingProxy.cs" />
    <Compile Include="AzureFileStagingWorker.cs" />
    <Compile Include="Client\IFileStagingClient.cs" />
    <Compile Include="Client\IFileStagingClientAsync.cs" />
    <Compile Include="..\..\Common\HpcFileInfo.cs" />
    <Compile Include="FileStagingBlobManager.cs" />
    <Compile Include="FileStagingProxy.cs" />
    <Compile Include="FileStagingWorker.cs" />
    <Compile Include="Client\FileStagingClient.cs" />
    <Compile Include="Client\GenericFileStagingClient.cs" />
    <Compile Include="FileUtil.cs" />
    <Compile Include="IFileStagingGenericRouter.cs" />
    <Compile Include="Tracing\AzureProxyTraceHelper.cs" />
    <Compile Include="Tracing\AzureWorkerTraceHelper.cs" />
    <Compile Include="Tracing\LocalProxyTraceHelper.cs" />
    <Compile Include="Tracing\LocalWorkerTraceHelper.cs" />
    <Compile Include="FileStagingCommon.cs" />
    <Compile Include="SchedulerFileStagingProxy.cs" />
    <Compile Include="NodeManagerFileStagingWorker.cs" />
    <Compile Include="IFileStagingRouter.cs" />
    <Compile Include="IFileStaging.cs" />
    <Compile Include="InternalFaultDetail.cs" />
    <Compile Include="FileStagingErrorCode.cs" />
    <Compile Include="Resources.Designer.cs">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>Resources.resx</DependentUpon>
    </Compile>
    <Compile Include="SecurityHelper.cs" />
  </ItemGroup>
  <ItemGroup>
    <EmbeddedResource Include="Resources.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
      <SubType>Designer</SubType>
    </EmbeddedResource>
  </ItemGroup>
  <ItemGroup>
    <None Include="FileStagingEvents.man">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\HpcCommon\HpcCommon.csproj">
      <Project>{2c3936c7-4850-41d7-9497-9040be302328}</Project>
      <Name>HpcCommon</Name>
    </ProjectReference>
    <ProjectReference Include="..\..\Management\ManagementAPI\ManagementAPI.MSBuild.csproj">
      <Project>{52a16bd4-2466-4d43-a5cf-f845d0617589}</Project>
      <Name>ManagementAPI.MSBuild</Name>
    </ProjectReference>
    <ProjectReference Include="..\..\Management\Win32Wrappers\Win32Wrappers.corext.vcxproj">
      <Project>{923c4896-d82a-481c-8d02-d537d98c7e1d}</Project>
      <Name>Win32Wrappers.corext</Name>
    </ProjectReference>
    <ProjectReference Include="..\..\soa\HpcDeploy\DataMovement\DataMovement.csproj">
      <Project>{f0a3e1b7-6c6f-4357-99ee-49210440fffd}</Project>
      <Name>DataMovement</Name>
    </ProjectReference>
    <ProjectReference Include="..\..\StoreAPI\Property\Properties.csproj">
      <Project>{61844849-3d26-4003-8146-5ae86985db3a}</Project>
      <Name>Properties</Name>
    </ProjectReference>
    <ProjectReference Include="..\..\StoreAPI\Store\Store.csproj">
      <Project>{82f72b8b-372e-4a1c-8139-714ae932ebcb}</Project>
      <Name>Store</Name>
    </ProjectReference>
  </ItemGroup>
  <Import Project="$(ExtendedTargetsPath)\Microsoft.CSharp.targets" />
</Project>
